<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>Hello MUI</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

		<link rel="stylesheet" href="css/mui.min.css">
		<link rel="stylesheet" type="text/css" href="picker/dist/css/mui.picker.all.css" />
		<style>
			html,
			body {
				background-color: #f8f8f8;
			}
			
			.title {
				font-size: 30px;
				line-height: 88px;
				color: #333;
			}
			
			.small-nav-box {
				padding: 10px 10px 0px 10px;
				background-color: #FFFFFF;
			}
			
			.seach-box {
				background-color: #FFFFFF;
				margin-top: 32px;
			}
			
			.mui-segmented-control .mui-control-item {
				line-height: 64px;
			}
			
			.mui-segmented-control.mui-segmented-control-inverted .mui-control-item.mui-active {
				color: #FFC600;
				border-bottom: 0;
				background: 0 0;
			}
			
			.mui-tab-label-in {
				color: #FFC600;
			}
			
			.small-nav {
				height: 64px;
				font-size: 24px;
				color: #222222;
			}
			
			.mui-active>div {
				border-bottom: 4px solid #FFC600;
				width: 129px;
				height: 64px;
				margin: auto;
			}
			
			td {
				border-bottom: 1px solid #F8F8F8;
			}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav" style="height: 88px;background-color: #FFC600;">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left" style="font-size: 70px;"></a>
			<h1 class="mui-title" style="font-size: 30px;line-height: 88px;color: #333;">订单详情</h1>
		</header>
		<div style="background-color: #FFFFFF; font-size: 32px; color: #333333; padding-left: 120px; overflow: hidden; margin-top: 128px;">
			<table>
				<tr style="height: 100px; line-height: 100px;">
					<td style="padding-right: 220px;">服务订单号：</td>
					<td style="width: 958px; text-align: center;" id="id"></td>
				</tr>
				<tr style="height: 100px; line-height: 100px;">
					<td style="padding-right: 240px;">下单角色：</td>
					<td style="width: 958px; text-align: center;" id="placeOrderType">显示橙色登录账号的角色（门店或合作点或小管家）</td>
				</tr>
				<tr style="height: 100px; line-height: 100px;">
					<td style="padding-right: 220px;">业绩归属店铺：</td>
					<td style="width: 958px; text-align: center;" id="ownership">XX</td>
				</tr>
			</table>
		</div>
		<div style="background-color: #FFFFFF; font-size: 32px; color: #333333; padding-left: 120px; overflow: hidden; margin-top: 16px;">
			<table>
				<tr style="height: 100px; line-height: 100px;">
					<td style="padding-right: 240px;">客人名称：</td>
					<td style="width: 958px; text-align: center;" id="buyOrderName">XX</td>
				</tr>
				<tr style="height: 100px; line-height: 100px;">
					<td style="padding-right: 240px;">客人手机号：</td>
					<td style="width: 958px; text-align: center;" id="buyOrderAccount">XX</td>
				</tr>
				<tr style="height: 100px; line-height: 100px;">
					<td style="padding-right: 240px;">取货地址：</td>
					<td style="width: 958px; text-align: center;" id="pickup_">XX</td>
				</tr>
				<tr style="height: 100px; line-height: 100px;">
					<td style="padding-right: 240px;">收货地址：</td>
					<td style="width: 958px; text-align: center;" id="delivery_">XX</td>
				</tr>
			</table>
		</div>
		<div style="background-color: #FFFFFF; font-size: 32px; color: #333333; padding-left: 120px; overflow: hidden; margin-top: 16px; height: 360px;">
			<table>
				<tr style="height: 100px;">
					<td style="padding-right: 332px; vertical-align: top; line-height: 32px; padding-top: 34px;">服务列表：</td>
					<td style="padding-top: 34px;" id="serviceOrderServiceItemsViews">
						<!--<div style="height: 148px; background-color: #F7F7F7; width: 898px; overflow: hidden; padding-left: 50px;">
							<div style=" height: 148px; float: left; overflow: hidden;">
								<img src="imgs/number.png" style=" margin-top: 39px;" />
							</div>
							<div style="padding-left: 24px; width: 581px; float: left;">
								<div style="margin-top: 36px; line-height: 24px; font-size: 24px; color: #121212;">
									<span>路易威登</span>
									<span style="margin-left: 36px;">红色</span>
									<span style="margin-left: 36px;">36号标识牌</span>
								</div>
								<div style="margin-top: 20px; line-height: 24px; font-size: 24px; color: #636363;">
									<span>鞋</span>
									<span style="margin-left: 60px;">保养+精洗</span>
								</div>
							</div>
							<div style="float: right; height: 148px; padding-top: 92px;">
								<span style="font-size: 24px; color:#1c1b1b; line-height: 24px;">小计：</span>
								<span style="font-size: 36px; color:#ff4949; line-height: 36px; margin-left: 8px; margin-right: 42px;">50元</span>
							</div>
						</div>
						<div style="height: 148px; background-color: #F7F7F7; width: 898px; overflow: hidden; padding-left: 50px; margin-top: 2px;">
							<div style=" height: 148px; float: left; overflow: hidden;">
								<img src="imgs/number.png" style=" margin-top: 39px;" />
							</div>
							<div style="padding-left: 24px; width: 581px; float: left;">
								<div style="margin-top: 36px; line-height: 24px; font-size: 24px; color: #121212;">
									<span>路易威登</span>
									<span style="margin-left: 36px;">红色</span>
									<span style="margin-left: 36px;">36号标识牌</span>
								</div>
								<div style="margin-top: 20px; line-height: 24px; font-size: 24px; color: #636363;">
									<span>鞋</span>
									<span style="margin-left: 60px;">保养+精洗</span>
								</div>
							</div>
							<div style="float: right; height: 148px; padding-top: 92px;">
								<span style="font-size: 24px; color:#1c1b1b; line-height: 24px;">小计：</span>
								<span style="font-size: 36px; color:#ff4949; line-height: 36px; margin-left: 8px; margin-right: 42px;">50元</span>
							</div>
						</div>-->
					</td>
				</tr>
			</table>
		</div>
		<div style="background-color: #FFFFFF; font-size: 32px; color: #333333; padding-left: 120px; overflow: hidden; margin-top: 16px; padding-bottom: 66px;">
			<table>
				<tr style="height: 100px;">
					<td style="padding-right:336px; vertical-align: top; padding-top: 44px;">备注：</td>
					<td style="width: 958px; text-align: center;">
						<div style="margin-top: 44px;" id="comments">XXXX</div>
						<div style="margin-top: 50px;">
							<span style="margin-right: 28px;"><img src="imgs/photo_01.png"></span>
							<span style="margin-right: 28px;"><img src="imgs/photo_01.png"></span>
							<span style="margin-right: 28px;"><img src="imgs/photo_01.png"></span>
						</div>
					</td>
				</tr>
			</table>
		</div>
		<div style="width: 100%; margin-top: 71px;">
			<div style="background-image: url(imgs/btn_bc@2x.png); width: 500px; height: 64px;  line-height: 64px; text-align: center; margin: auto; font-size: 28px;">确认到厂，拆分工单</div>
		</div>

	</body>
	<script src="js/mui.min.js"></script>
	<script src="js/jquery-2.1.0.js" type="text/javascript" charset="utf-8"></script>
	<script src="picker/dist/js/mui.picker.all.js" type="text/javascript" charset="utf-8"></script>
	<script src="public.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript" charset="utf-8">
		if(window.plus)
			plusReady();
		else
			document.addEventListener("plusready", plusReady, false);

		var userinfo, access_token, orderid

		function loadInfo() {
			mui.ajax(path + '/v1/serviceorders?access_token=' + access_token, {
				async: false,
				data: {
					id: orderid,
				},
				crossDomain: true,
				type: 'get',
				timeout: 30000,
				dataType: 'json',
				//				processData:false,
				headers: { 'Content-Type': 'application/json' },
				success: function(data, type) {
					var result = data.list[0]
					$("#id").html(result.id)
					if(result.placeOrderType == "11")
						$("#placeOrderType").html("用户")
					else if(result.placeOrderType == "21")
						$("#placeOrderType").html("门店")
					else if(result.placeOrderType == "22")
						$("#placeOrderType").html("合作点")
					else if(result.placeOrderType == "23")
						$("#placeOrderType").html("小管家")
					$("#ownership").html(result.ownership)
					$("#buyOrderName").html(result.buyOrderName)
					$("#buyOrderAccount").html(result.buyOrderAccount)
					$("#pickup_").html(result.pickupProvince + result.pickupCity + result.pickupDistrict + result.pickupAddress)
					$("#delivery_").html(result.deliveryProvince + result.deliveryCity + result.deliveryDistrict + result.deliveryAddress)
					$("#comments").html(result.comments)
					var html = "",
						result1 = result.serviceOrderServiceItemsViews

					for(var i = 0; i < result1.length; i++) {
						html += '<div style="height: 148px; background-color: #F7F7F7; width: 898px; overflow: hidden; padding-left: 50px;">' +
							'	<div style=" height: 148px; float: left; overflow: hidden;">' +
							'		<div style="background-color:#ffc600;font-size:40px; width:60px;height:60px;margin-top:39px;border:1px solid #ffc600;border-radius:50%;text-align:center;line-height:60px;"><span>' + (i + 1) + '</span></div>' +
							'	</div>' +
							'	<div style="padding-left: 24px; width: 400px; float: left;">' +
							'		<div style="margin-top: 36px; line-height: 24px; font-size: 24px; color: #121212;">' +
							'			<span>' + result1[i].brandType.chineseName + '</span>' +
							'			<span style="margin-left: 36px;">红色</span>' +
							'			<span style="margin-left: 36px;">' + result1[i].signage + '</span>' +
							'		</div>' +
							'		<div style="margin-top: 20px; line-height: 24px; font-size: 24px; color: #636363;">' +
							'			<span>' + result1[i].itemType.name + '</span>' +
							'			<span style="margin-left: 60px;">' + result1[i].project.name + '</span>' +
							'		</div>' +
							'	</div>' +
							'	<div style="float: right; height: 148px; padding-top: 92px;">' +
							'		<span style="font-size: 24px; color:#1c1b1b; line-height: 24px;">小计：</span>' +
							'		<span style="font-size: 36px; color:#ff4949; line-height: 36px; margin-left: 8px; margin-right: 42px;">' + result1[i].total + '元</span>' +
							'	</div></div>'

					}
					$("#serviceOrderServiceItemsViews").html(html)
				},
				error: function(xhr, type, errorThrown) {
					//异常处理；
					mui.toast('查询失败请联系管理员！！！', { duration: 'short' })
				}
			});
		}

		function plusReady() {
			var self = plus.webview.currentWebview();
			userinfo = self.userinfo
			access_token = self.access_token
			orderid = self.orderid
			loadInfo()
		}
	</script>

</html>